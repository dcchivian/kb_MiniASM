#
# define display information
#
name: Assemble with MiniASM
tooltip: |
    Assemble long reads using the ultrafast MiniASM assembler.
screenshots: []

icon: MiniASM.png

#
# define a set of similar methods that might be useful to the user
#
suggestions:
    apps:
        related:
            []
        next:
            []
    methods:
        related:
            []
        next:
            [annotate_contigset]

#
# Configure the display and description of parameters
#
parameter-groups:
    preSelect_args :
        ui-name : |
             Pre-selection parameters
        short-hint : |
             Pre-selection parameters
    overlap_args :
        ui-name : |
             Overlap parameters
        short-hint : |
             Overlap parameters
    layout_args :
        ui-name : |
             Layout parameters
        short-hint : |
             Layout parameters
    misc_args :
        ui-name : |
             Miscellaneous parameters
        short-hint : |
             Miscellaneous parameters

parameters :
    read_libraries :
        ui-name : |
            Read library
        short-hint : |
            The libraries of reads to be assembled. Reads length should be <= 512.
    output_contigset_name :
        ui-name : |
            Output ContigSet
        short-hint : |
            The name under which the resulting ContigSet will be saved in the Narrative
    min_contig :
        ui-name : |
            Minimum Contig Length
        short-hint : |
            The shortest contig to accept in the resulting assembly object, should be < largest contig size
    pre_filter :
        ui-name : |
            Prefilter
        short-hint : |
            prefilter clearly contained reads (2-pass required)
    min_match_len :
        ui-name : |
            Min match length
        short-hint : |
            Min match length (Default: 100)
    min_identity :
        ui-name : |
            Min identity
        short-hint : |
            Min identity (Default: 0.05)
    min_span :
        ui-name : |
            Min span
        short-hint : |
            Min span (Default: 2000)
    min_coverage :
        ui-name : |
            Min coverage
        short-hint : |
            Min coverage (Default: 3)
    min_overlap :
        ui-name : |
            Min overlap
        short-hint : |
            Min overlap (same as Min span)
    max_overhang_len :
        ui-name : |
            Max overhang length (Default: 1000)
        short-hint : |
            Min overlap (same as Min span)
    min_match_ratio :
        ui-name : |
            Min end-to-end match ratio
        short-hint : |
            Min end-to-end match ratio (Default: 0.8)
    max_gap_diff :
        ui-name : |
            Max gap differences
        short-hint : |
            Max gap differences between reads for trans-reduction (Default: 1000)
    max_dist_bubble :
        ui-name : |
            Max distance
        short-hint : |
            max distance for bubble popping (Default: 50000)
    small_unitig_threshold :
        ui-name : |
            Small unitig threshold
        short-hint : |
            Small unitig threshold (Default: 4)
    rounds_short_overlap :
        ui-name : |
            Rounds of short overlap removal
        short-hint : |
            Rounds of short overlap removal (Default: 3)
    max_overlap_ratio :
        ui-name : |
            Max overlap drop ratio
        short-hint : |
            Max overlap drop ratio (Default: 0.7)
    min_overlap_ratio :
        ui-name : |
            Min overlap drop ratio
        short-hint : |
            Min overlap drop ratio (Default: 0.5)
    aggr_overlap_ratio :
        ui-name : |
            Aggressive overlap drop ratio
        short-hint : |
            aggressive overlap drop ratio in the end (Default: 0.8)
    output_info :
        ui-name : |
            Output information
        short-hint : |
            Output information: bed, paf, sg or ug  (Default: ug)
    both_directions :
        ui-name : |
            Directions of an arc
        short-hint : |
            Both directions of an arc are present in input
    skip_1_pass :
        ui-name : |
            Skip 1-pass
        short-hint : |
            Skip 1-pass read selection
    skip_2_pass :
        ui-name : |
            Skip 2-pass
        short-hint : |
            Skip 2-pass read selection
    print_version :
        ui-name : |
            Print version
        short-hint : |
            Print version number

#
# Configure the display and description of parameters
#

description : |
    <p>
    This is a KBase wrapper for
    <https://github.com/lh3/miniasm" target="_blank">MiniASM</a>
    </p>

    <p>
    MiniASM is an ultra-fast overlap-layout-consensus based de novo assembler for noisy long reads
    developed by Heng Li. It has been shown to assemble ~50X microbial PacBio reads into a draft assembly
    of a small number of (sometimes 1) contigs in a matter of minutes. MiniASM derives this performance
    from a locality-sensitive hashing based overlapper implemented in minimap.
    </p>
    <p>
    <b>Known limitations:</b>  MiniASM does not support short Illumina reads.
    MiniASM is still in early development stage, and has only been tested on a dozen of PacBio and Oxford
    Nanopore bacterial data sets. The consensus sequence computed by MiniASM may not be as accurate
    as slower and more mature methods such as HGAP3.
    </p>
    <b>Parameters:</b>
    <pre>
    Usage: miniasm [options]
    Options:
      Pre-selection:
        -R          prefilter clearly contained reads (2-pass required)
        -m INT      min match length [100]
        -i FLOAT    min identity [0.05]
        -s INT      min span [2000]
        -c INT      min coverage [3]
      Overlap:
        -o INT      min overlap [same as -s]
        -h INT      max over hang length [1000]
        -I FLOAT    min end-to-end match ratio [0.8]
      Layout:
        -g INT      max gap differences between reads for trans-reduction [1000]
        -d INT      max distance for bubble popping [50000]
        -e INT      small unitig threshold [4]
        -f FILE     read sequences []
        -n INT      rounds of short overlap removal [3]
        -r FLOAT[,FLOAT]
                    max and min overlap drop ratio [0.7,0.5]
        -F FLOAT    aggressive overlap drop ratio in the end [0.8]
      Miscellaneous:
        -p STR      output information: bed, paf, sg or ug [ug]
        -b          both directions of an arc are present in input
        -1          skip 1-pass read selection
        -2          skip 2-pass read selection
        -V          print version number
    </pre>

publications :
    -
        display-text : |
            <https://github.com/lh3/miniasm" target="_blank">https://github.com/lh3/miniasm</a>
